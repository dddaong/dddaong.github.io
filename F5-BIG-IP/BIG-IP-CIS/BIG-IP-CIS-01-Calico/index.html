<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=DDAONG><link href=https://wiki.ddaong.co.kr/F5-BIG-IP/BIG-IP-CIS/BIG-IP-CIS-01-Calico/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-8.5.10"><title>F5 BIG-IP CIS 소개 - DDAONG WIKI</title><link rel=stylesheet href=../../../assets/stylesheets/main.975780f9.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.2505c338.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu:300,300i,400,400i,700,700i%7CUbuntu+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Ubuntu";--md-code-font:"Ubuntu Mono"}</style><link rel=stylesheet href=../../../stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=light data-md-color-primary=blue-grey data-md-color-accent=indigo> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#f5-big-ip-container-ingress-service class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="DDAONG WIKI" class="md-header__button md-logo" aria-label="DDAONG WIKI" data-md-component=logo> <img src=../../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> DDAONG WIKI </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> F5 BIG-IP CIS 소개 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=light data-md-color-primary=blue-grey data-md-color-accent=indigo aria-label="Embrace the dark side" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Embrace the dark side" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent=deep-orange aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/dddaong/dddaong.github.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="DDAONG WIKI" class="md-nav__button md-logo" aria-label="DDAONG WIKI" data-md-component=logo> <img src=../../../assets/logo.png alt=logo> </a> DDAONG WIKI </label> <div class=md-nav__source> <a href=https://github.com/dddaong/dddaong.github.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> DDAONG Docs Archive </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Docker <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Docker data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Docker/Private-container-Local-Registry/ class=md-nav__link> Docker - Private(Local) Container Registry </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> F5 BIG IP <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="F5 BIG IP" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> F5 BIG IP </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../00-F5-HW-SW-Support-Policy/ class=md-nav__link> F5 Hardware / Software Support Policy </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2 checked> <label class=md-nav__link for=__nav_3_2> BIG IP CIS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="BIG IP CIS" data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> BIG IP CIS </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> F5 BIG-IP CIS 소개 <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> F5 BIG-IP CIS 소개 </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#container-ingress-servicecis class=md-nav__link> Container Ingress Service(CIS)란 </a> </li> <li class=md-nav__item> <a href=#ingress-controller class=md-nav__link> Ingress Controller의 요건 </a> </li> <li class=md-nav__item> <a href=#f5-rest-api-scheme-as3-extension class=md-nav__link> F5 REST API Scheme - AS3 Extension의 사용 </a> </li> <li class=md-nav__item> <a href=#cis class=md-nav__link> CIS를 사용하는 이유 </a> </li> <li class=md-nav__item> <a href=#cis-deployment-options class=md-nav__link> CIS의 Deployment options </a> <nav class=md-nav aria-label="CIS의 Deployment options"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#nodeport class=md-nav__link> Nodeport </a> </li> <li class=md-nav__item> <a href=#clusterip class=md-nav__link> ClusterIP </a> </li> <li class=md-nav__item> <a href=#nodeportlocal class=md-nav__link> NodePortLocal </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../BIG-IP-CIS-02-Calico%2BClusterip/ class=md-nav__link> F5 BIG-IP CIS - Calico+ClusterIP 모드 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> BIG IP TS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="BIG IP TS" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> BIG IP TS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../BIG-IP-TS/f5-ts-monitoring-prometheus-grafana/ class=md-nav__link> F5 Telemetry Streaming with Prometheus & Grafana Test </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> BIG IP 일반 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="BIG IP 일반" data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> BIG IP 일반 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../BIG-IP-%EC%9D%BC%EB%B0%98/BIG-IP-SYSLOG-Config-Sample/ class=md-nav__link> BIG-IP - Syslog Custom Config Sample </a> </li> <li class=md-nav__item> <a href=../../BIG-IP-%EC%9D%BC%EB%B0%98/F5-BIG-IP-SNMP-OID/ class=md-nav__link> F5 BIG-IP - SNMP OID </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> K3s <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=K3s data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> K3s </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../K3s/00-Lightweight-Kubernetes-compare/ class=md-nav__link> Overview Lightweight Kubernetes </a> </li> <li class=md-nav__item> <a href=../../../K3s/01-K3S-Installation/ class=md-nav__link> K3S Installation for SingleNode Cluster Guide </a> </li> <li class=md-nav__item> <a href=../../../K3s/UsePrivateRegistryAsKubeService-in-K3S/ class=md-nav__link> K3s Installation with Private Registry </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Kubernetes data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Kubernetes/Kube-kubeadm-install/ class=md-nav__link> K8s Installation script for Centos7 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> NGINX Plus <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="NGINX Plus" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> NGINX Plus </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../NGINX-Plus/NGINX-Plus-Product-Install-guide/ class=md-nav__link> NGINX Product Install Guides </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_2 type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2> NGINX Controller <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="NGINX Controller" data-md-level=2> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> NGINX Controller </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../NGINX-Plus/NGINX-Controller/API-GW-Image-build-NAP/ class=md-nav__link> NGINX Controller - NAP Container Image build </a> </li> <li class=md-nav__item> <a href=../../../NGINX-Plus/NGINX-Controller/Arcadia-and-NGINX-Controller-Configuration-Hands-on/ class=md-nav__link> Arcadia and NGINX Controller Configuration </a> </li> <li class=md-nav__item> <a href=../../../NGINX-Plus/NGINX-Controller/Build-NGINX-Plus-API-GW-container-image/ class=md-nav__link> NGINX Controller - NGINX Plus Container Image build </a> </li> <li class=md-nav__item> <a href=../../../NGINX-Plus/NGINX-Controller/ConfigDB-Manual-Restore/ class=md-nav__link> ConfigDB Manual Restore </a> </li> <li class=md-nav__item> <a href=../../../NGINX-Plus/NGINX-Controller/NGINX-Controller-Alert-%EB%A9%94%EC%9D%BC-%EC%84%A4%EC%A0%95/ class=md-nav__link> NGINX Controller - Alert 메일 설정 </a> </li> <li class=md-nav__item> <a href=../../../NGINX-Plus/NGINX-Controller/NGINX-Controller-Deployment-Guide/ class=md-nav__link> NGINX Controller Deployment Guide </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_3 type=checkbox id=__nav_6_3> <label class=md-nav__link for=__nav_6_3> NGINX Ingress Ctlr <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="NGINX Ingress Ctlr" data-md-level=2> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> NGINX Ingress Ctlr </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../NGINX-Plus/NGINX-Ingress-Ctlr/Helm-Chart%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4-NPIC-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0/ class=md-nav__link> NGINX+ Ingress Controller - Helm Chart 배포 </a> </li> <li class=md-nav__item> <a href=../../../NGINX-Plus/NGINX-Ingress-Ctlr/NGINX-Ingress-Controller-Lua-package-path-%ED%85%8C%EC%8A%A4%ED%8A%B8/ class=md-nav__link> NGINX+ Ingress Controller - lua_package_path 테스트 </a> </li> <li class=md-nav__item> <a href=../../../NGINX-Plus/NGINX-Ingress-Ctlr/NGINX-Plus-Ingress-Controller%EC%9D%98-JWT-%EC%9D%B8%EC%A6%9D-%ED%85%8C%EC%8A%A4%ED%8A%B8/ class=md-nav__link> NGINX+ Ingress Controller - JWT 인증 </a> </li> <li class=md-nav__item> <a href=../../../NGINX-Plus/NGINX-Ingress-Ctlr/NPIC%EC%97%90%EC%84%9C-VS-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/ class=md-nav__link> NGINX+ Ingress Controller - VS Crd로 Lua 사용 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_4 type=checkbox id=__nav_6_4> <label class=md-nav__link for=__nav_6_4> NGINX Plus <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="NGINX Plus" data-md-level=2> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> NGINX Plus </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../NGINX-Plus/NGINX-Plus/NGINX-Plus-JWT-%EC%9D%B8%EC%A6%9D-%ED%85%8C%EC%8A%A4%ED%8A%B8/ class=md-nav__link> NGINX+ - JWT 인증 테스트 </a> </li> <li class=md-nav__item> <a href=../../../NGINX-Plus/NGINX-Plus/NGINX-Plus-NAP-WAF-DoS-Install-Guide/ class=md-nav__link> NGINX Plus NAP WAF DoS Install Guide </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Protocols <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Protocols data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Protocols </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Protocols/Bash-Script%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-JWT-JWK-JWKS-%EC%83%9D%EC%84%B1/ class=md-nav__link> JWT - Bash Script를 사용한 JWT, JWK, JWKS 생성 </a> </li> <li class=md-nav__item> <a href=../../../Protocols/JWT%EC%9D%98%EC%9D%B4%ED%95%B4-NGINX%EC%9D%98-JWT-%EC%9D%B8%EC%A6%9D/ class=md-nav__link> JWT - JWT Concept </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Tools <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tools data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Tools/IP-Changer-Batch-Script/ class=md-nav__link> Windows IP Changer Batch Script </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#container-ingress-servicecis class=md-nav__link> Container Ingress Service(CIS)란 </a> </li> <li class=md-nav__item> <a href=#ingress-controller class=md-nav__link> Ingress Controller의 요건 </a> </li> <li class=md-nav__item> <a href=#f5-rest-api-scheme-as3-extension class=md-nav__link> F5 REST API Scheme - AS3 Extension의 사용 </a> </li> <li class=md-nav__item> <a href=#cis class=md-nav__link> CIS를 사용하는 이유 </a> </li> <li class=md-nav__item> <a href=#cis-deployment-options class=md-nav__link> CIS의 Deployment options </a> <nav class=md-nav aria-label="CIS의 Deployment options"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#nodeport class=md-nav__link> Nodeport </a> </li> <li class=md-nav__item> <a href=#clusterip class=md-nav__link> ClusterIP </a> </li> <li class=md-nav__item> <a href=#nodeportlocal class=md-nav__link> NodePortLocal </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/dddaong/dddaong.github.io/edit/master/docs/F5-BIG-IP/BIG-IP-CIS/BIG-IP-CIS-01-Calico.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=f5-big-ip-container-ingress-service>F5 BIG-IP Container Ingress Service 소개<a class=headerlink href=#f5-big-ip-container-ingress-service title="Permanent link">&para;</a></h1> <h4 id=container-ingress-servicecis>Container Ingress Service(CIS)란<a class=headerlink href=#container-ingress-servicecis title="Permanent link">&para;</a></h4> <ul> <li>Kubernetes 환경에서는 내부 워크로드 서비스의 노출을 위해, Ingress Controller를 사용합니다.</li> <li>F5 Container Ingress Service는 <a href=https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/#additional-controllers>Kubernetes.io의 Ingress Controller 문서</a>에 리스트업 되어 있는 Ingress Controller입니다.</li> </ul> <h4 id=ingress-controller>Ingress Controller의 요건<a class=headerlink href=#ingress-controller title="Permanent link">&para;</a></h4> <p>Ingress Controller는 기본적으로 클러스터 내 다른 Service 개체들을 대표하는 Service로서, Proxy 동작을 수행하며 Kubernetes 안의 Workload 및 Ingress 등의 설정을 읽어 자기 자신의 Config에 반영하는 동작이 필요합니다. 대표적 Ingress Controller인 NGINX Ingress Controller를 기준으로 설명해보자면, NGINX Ingress Controller는 Kubernetes Cluster 내부에 NGINX Ingress Controller Pod가 존재하고, 그 Service가 다른 서비스를 대표해 외부로 노출됩니다.</p> <p align=center><img src=https://github.com/dddaong/dddaong.github.io/raw/master/_posts/imgs/2022-08-03-BIG-IP-CIS-Calico01.png></p> <p>NGINX Ingress Controller는 Ingress 개체 설정에 따라 자동으로 NGINX Config로 반영합니다. 사용자가 수동으로 NGINX Config를 수정할 필요가 없습니다. 유입되는 실제 서비스 트래픽은 자동 생성된 NGINX Config에 따라 L7 Routing되어 다른 서비스로 프록시 됩니다.</p> <p align=center><img src=https://github.com/dddaong/dddaong.github.io/raw/master/_posts/imgs/2022-08-03-BIG-IP-CIS-Calico02.png></p> <p>한편, BIG-IP Device는 기본적으로 Proxy 동작을 수행하기 때문에, Kubernetes Workload의 상태만 실시간으로 TMOS Config로 반영할 수 있다면, BIG-IP Device를 Ingress Controller로 사용할 수 있습니다. F5 Container Ingress Service는 이 Kubernetes의 상태가 Config로 반영되도록 해주는 어플리케이션으로서, BIG-IP LTM을 Ingress Controller로 사용할 수 있도록 하는 일종의 미들웨어이자 Kubernetes Cluster를 대신해 TMOS와 통신해주는 인터페이스 역할의 어플리케이션입니다. 이 CIS는 TMOS에서 제공하는 F5 REST API를 통해 Workload 상태를 Config로 반영할 수 있도록 합니다.</p> <h4 id=f5-rest-api-scheme-as3-extension>F5 REST API Scheme - AS3 Extension의 사용<a class=headerlink href=#f5-rest-api-scheme-as3-extension title="Permanent link">&para;</a></h4> <p>사용자가 직접 수동으로 F5 REST API에서 어떤 서비스를 설정한다고 가정하면, Pool 생성, Profile 생성, Virtual Server 생성 등 각 개체마다 여러 번의 API Call이 필요합니다. 또한 이미 수행한 API Call을 다시 요청하는 경우, Error 메시지를 반환하기도 하고, Kubernetes Workload를 Config로 반영하려면 기존의 REST API 스키마로는 비효율적이며 Object에 따라 사용하기 복잡한 부분이 있습니다.</p> <p>그래서, CIS는 AS3 Extension이라는 F5 REST API의 확장 규격을 사용합니다. F5 Service 설정에 필요한 모든 것을 하나의 Request에서 작성하여 Application의 전체 Config를 하나의 API Request에서 구성할 수 있도록 해줍니다.</p> <p>또한 API Request가 명령형이 아닌, 선언형으로서 AS3 Extension은 Declarative(선언형) Model API Scheme을 사용해, 목표 구성을 작성하면, 그에 따라 알아서 Config를 완성하는 식으로 동작합니다. 이 방식을 통해 한 번의 API Call로 TMOS Config를 완성할 수 있도록 합니다.</p> <ul> <li>Imperative(명령형) vs Declarative(선언형) 명령형과 선언형을 간략하게 설명하자면, 명령형Imperative은 서비스를 구성하기 위해 무엇을 할지를 직접 명령하는 방식이고, 선언형은 원하는 최종 설정을 지정하면 시스템이 그에 맞는 방법을 확인하여 수행하는 형식입니다. 좀더 구체적으로는 “What to DO”와 “What to BE”의 차이이며, 기존 REST API의 동작인 Pool 생성, Profile 생성, Policy Rule 생성, Virtual Server 생성 등 각 단계마다 동작을 지정하는 방법이 명령형Imperative model API Scheme이며, AS3는 선언형Declarative model API Scheme로서, 원하는 목표 구성을 작성하면 실제 Config 동작은 BIG-IP에서 이뤄지는 형식으로 동작합니다.</li> </ul> <h4 id=cis>CIS를 사용하는 이유<a class=headerlink href=#cis title="Permanent link">&para;</a></h4> <p>Kubernetes 클러스터 내부에서 Pod로서 동작하는 여타 Ingress Controller와 Container Ingress Service와 비교하자면, CIS가 하드웨어를 사용하여 얻을 수 있는 가속의 장점, 설정에 따라 Pod까지 직접 도달할 수 있어 Connection 제어 및 다양한 Persistence의 사용, 비교적 간편한 VIP 할당 및 BIG-IP의 기능 전반을 활용할 수 있는 이점이 있습니다.</p> <h4 id=cis-deployment-options>CIS의 Deployment options<a class=headerlink href=#cis-deployment-options title="Permanent link">&para;</a></h4> <h5 id=nodeport>Nodeport<a class=headerlink href=#nodeport title="Permanent link">&para;</a></h5> <p>NodePort 모드는 Kubernetes Cluster Overlay Network와 연동을 하지 않는 설치 방식입니다. Overlay Network와 연동 과정이 필요 없기 때문에 설치가 가장 간단하며, 때문에 BIG-IP의 Pool member가 Kubernetes Node IP + Node Port가 됩니다. Node IP를 Pool member로 하기 때문에 Pod Scale in/out 등에 영향을 받지 않고, 따라서Pool Member의 변화가 거의 없습니다. BIG-IP가 Pod까지 직접 도달하지 못하고, Service를 통해 Pod에 접근하기 때문에 Pod에 대해 Cluster 내에서 어떤 경로로 트래픽이 전달되었는지, 단일 Pod가 갖고 있는 Connection의 숫자, LB 상태 등 가시성 확보가 어렵습니다. Pod에 대한 Load balance의 주체는 Kubernetes Service인 만큼 Kube-Proxy 또는 구성에 따라 IPVS를 통해 Pod에 대해 한번 더 LB가 이뤄지게 되며, 복잡한 iptables 테이블 때문에 약간의 성능 저하가 있을 수도 있습니다.</p> <p align=center><img src=https://github.com/dddaong/dddaong.github.io/raw/master/_posts/imgs/2022-08-03-BIG-IP-CIS-Calico03.png></p> <h5 id=clusterip>ClusterIP<a class=headerlink href=#clusterip title="Permanent link">&para;</a></h5> <p>ClusterIP 모드는 BIG-IP 장비가 Kubernetes Cluster Overlay Network에 접근할 수 있도록 하는 설치 방식입니다. BIG-IP가 Pod에 직접 접근이 가능하기 때문에 BIG-IP의 Pool member가 Pod의 IP, Port가 됩니다. Pod Scale-in/out에 Pool Member config가 직접 영향을 받으며, 비교적 명확한 가시성을 확보할 수 있습니다. Flannel CNI와의 연동을 위해 VXLAN을 사용하거나, Calico 연동을 위해 BGP Peer 설정을 수행하거나 하는 과정이 필요합니다. (Calico CNI와 BGP 연동 시 Dynamic Routing License가 필요합니다.)</p> <p align=center><img src=https://github.com/dddaong/dddaong.github.io/raw/master/_posts/imgs/2022-08-03-BIG-IP-CIS-Calico04.png></p> <h5 id=nodeportlocal>NodePortLocal<a class=headerlink href=#nodeportlocal title="Permanent link">&para;</a></h5> <p>Antrea CNI의 NodePortLocal 기능을 사용하는 모드로서, Antrea Agent가 제공하는 포트맵을 사용해 Kube-Proxy를 바이패스할 수 있도록 합니다. NodePort 모드와 유사하게 Kubernetes Cluster Overlay Network와 연동을 하지 않는 설치 방식입니다. Service 개체의 Type 항목으로 NodePort를 사용하지 않고, Pod 또는 Service에 작성한 ‘NodePortLocal’ Annotation에 따라 BIG-IP로 반영됩니다. 따라서 Load Balancing의 대상인 Pod가 존재하는 Node의 IP, Port가 Pool Member가 되며, 이 정보는 Antrea Agent가 제공하는 NodePort 모드에 비해 가시성이 어느정도 확보된다고 볼 수 있습니다.</p> <p align=center><img src=https://github.com/dddaong/dddaong.github.io/raw/master/_posts/imgs/2022-08-03-BIG-IP-CIS-Calico05.png></p> <p>[링크] <a href=https://antrea.io/docs/main/ >https://antrea.io/docs/main/</a></p> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../00-F5-HW-SW-Support-Policy/ class="md-footer__link md-footer__link--prev" aria-label="Previous: F5 Hardware / Software Support Policy" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> F5 Hardware / Software Support Policy </div> </div> </a> <a href=../BIG-IP-CIS-02-Calico%2BClusterip/ class="md-footer__link md-footer__link--next" aria-label="Next: F5 BIG-IP CIS - Calico+ClusterIP 모드" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> F5 BIG-IP CIS - Calico+ClusterIP 모드 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.5a2dcb6a.min.js></script> </body> </html>